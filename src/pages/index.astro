---
import Layout from "../layouts/Layout.astro";
import Schedule from "../components/Schedule.astro";
import ulaxData from "../data/ulax.json";
import { manualEvents } from "../data/events";
import type { UlaxGameSerialized, UlaxAllDataSerialized } from "../lib/ulax";

const data = ulaxData as UlaxAllDataSerialized;
const season = data.currentSeason;
const seasonData = data.seasons[season];
const ulaxGames = (seasonData?.schedule ?? []) as UlaxGameSerialized[];

const schools = [
  "Bates",
  "Cal Poly",
  "Colby",
  "Colorado",
  "Coast Guard",
  "Dominican",
  "Drexel",
  "Georgia Tech",
  "Gettysburg",
  "Middlebury",
  "Navy",
  "Notre Dame",
  "Penn State",
  "Princeton",
  "Trinity",
  "Tufts",
  "UC Berkeley",
  "USC",
  "Vermont",
  "Villanova",
  "Williams",
];
---

<Layout title="Home" showSectionNav={true}>
  <!-- Custom lacrosse ball cursor -->
  <div
    id="ball-cursor"
    class="pointer-events-none fixed z-50 -translate-x-1/2 -translate-y-1/2 opacity-0 transition-opacity duration-200"
    aria-hidden="true"
  >
    <div
      class="cursor-inner w-5 h-5 rounded-full bg-white border border-black/30 shadow-[0_0_10px_rgba(255,255,255,0.3)] transition-all duration-200"
    >
    </div>
    <div
      class="cursor-ring absolute inset-0 -m-2 rounded-full border-2 border-white/50 opacity-0 scale-50 transition-all duration-200"
    >
    </div>
  </div>
  <style>
    /* Hide cursor everywhere */
    :global(body.custom-cursor),
    :global(body.custom-cursor *) {
      cursor: none !important;
    }
    #ball-cursor.hovering .cursor-inner {
      transform: scale(1.4);
    }
    #ball-cursor.hovering .cursor-ring {
      opacity: 1;
      transform: scale(1);
    }
    #ball-cursor.pressing .cursor-inner {
      transform: scale(1);
    }
    #ball-cursor.pressing .cursor-ring {
      opacity: 0;
      transform: scale(0.5);
    }
    /* Radar sweep — constant RPM rotation, matching real antenna motors.
       Real marine radar antennas rotate at 20-50 RPM (uniform speed).
       The PPI sweep mirrors the antenna exactly. */
    @keyframes radar-sweep {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    .radar-sweep-cone {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      border-radius: 50%;
      background: conic-gradient(
        from 0deg,
        transparent 0deg,
        transparent 345deg,
        rgba(196, 150, 46, 0.0) 345deg,
        rgba(196, 150, 46, 0.03) 352deg,
        rgba(196, 150, 46, 0.08) 356deg,
        rgba(196, 150, 46, 0.16) 358.5deg,
        rgba(196, 150, 46, 0.22) 359.5deg,
        rgba(196, 150, 46, 0.06) 360deg
      );
      animation: radar-sweep 8s linear infinite;
    }
    /* Phosphor afterglow — wider, dimmer trail behind the leading edge */
    .radar-sweep-glow {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      border-radius: 50%;
      background: conic-gradient(
        from 0deg,
        transparent 0deg,
        transparent 310deg,
        rgba(196, 150, 46, 0.0) 310deg,
        rgba(196, 150, 46, 0.01) 330deg,
        rgba(196, 150, 46, 0.025) 348deg,
        rgba(196, 150, 46, 0.05) 356deg,
        rgba(196, 150, 46, 0.02) 360deg
      );
      filter: blur(6px);
      animation: radar-sweep 8s linear infinite;
    }
    /* Blip pulse — bloom bright when sweep passes, slow phosphor decay */
    @keyframes blip-pulse {
      0% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
      3% { opacity: 0.85; transform: translate(-50%, -50%) scale(1); }
      12% { opacity: 0.5; transform: translate(-50%, -50%) scale(0.95); }
      30% { opacity: 0.25; transform: translate(-50%, -50%) scale(0.9); }
      60% { opacity: 0.12; transform: translate(-50%, -50%) scale(0.85); }
      100% { opacity: 0.08; transform: translate(-50%, -50%) scale(0.8); }
    }
    @keyframes blip-ring {
      0% { opacity: 0.6; transform: translate(-50%, -50%) scale(1); }
      5% { opacity: 0.35; transform: translate(-50%, -50%) scale(1.3); }
      15% { opacity: 0.15; transform: translate(-50%, -50%) scale(1.8); }
      40% { opacity: 0; transform: translate(-50%, -50%) scale(2.5); }
      100% { opacity: 0; transform: translate(-50%, -50%) scale(2.5); }
    }
    .radar-blip {
      position: absolute;
      border-radius: 50%;
      transform: translate(-50%, -50%);
      animation: blip-pulse 8s linear infinite;
    }
    .radar-blip-ring {
      position: absolute;
      border-radius: 50%;
      transform: translate(-50%, -50%);
      border: 1px solid;
      animation: blip-ring 8s linear infinite;
    }
    /* Scanline flicker — subtle horizontal noise */
    @keyframes scanline {
      0% { background-position: 0 0; }
      100% { background-position: 0 4px; }
    }
    .radar-scanlines {
      position: absolute;
      inset: 0;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(90, 155, 196, 0.012) 2px,
        rgba(90, 155, 196, 0.012) 4px
      );
      animation: scanline 0.3s steps(2) infinite;
    }
  </style>

  <!-- Hero -->
  <section id="hero" class="snap-section section-full relative overflow-hidden">
    <!-- Radar scope background -->
    <div class="absolute inset-0 pointer-events-none" aria-hidden="true">
      <!-- Range rings — solid major -->
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120px] h-[120px] rounded-full border border-powder/20"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[280px] h-[280px] rounded-full border border-powder/18"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[440px] h-[440px] rounded-full border border-powder/15"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] rounded-full border border-powder/12"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[760px] h-[760px] rounded-full border border-powder/10"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[920px] h-[920px] rounded-full border border-powder/7"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[1080px] h-[1080px] rounded-full border border-powder/5"></div>
      <!-- Range rings — dashed minor -->
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[200px] h-[200px] rounded-full border border-dashed border-powder/8"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[360px] h-[360px] rounded-full border border-dashed border-powder/6"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[520px] h-[520px] rounded-full border border-dashed border-powder/5"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[680px] h-[680px] rounded-full border border-dashed border-powder/4"></div>
      <!-- Cardinal bearing lines -->
      <div class="absolute top-0 left-1/2 w-px h-full bg-powder/18"></div>
      <div class="absolute top-1/2 left-0 w-full h-px bg-powder/18"></div>
      <!-- Intercardinal 45° -->
      <div class="absolute top-1/2 left-1/2 w-[160%] h-px bg-powder/8 origin-center rotate-45 -translate-x-1/2"></div>
      <div class="absolute top-1/2 left-1/2 w-[160%] h-px bg-powder/8 origin-center -rotate-45 -translate-x-1/2"></div>
      <!-- 30° bearing lines -->
      <div class="absolute top-1/2 left-1/2 w-[160%] h-px bg-powder/5 origin-center rotate-[30deg] -translate-x-1/2"></div>
      <div class="absolute top-1/2 left-1/2 w-[160%] h-px bg-powder/5 origin-center rotate-[60deg] -translate-x-1/2"></div>
      <div class="absolute top-1/2 left-1/2 w-[160%] h-px bg-powder/5 origin-center rotate-[120deg] -translate-x-1/2"></div>
      <div class="absolute top-1/2 left-1/2 w-[160%] h-px bg-powder/5 origin-center rotate-[150deg] -translate-x-1/2"></div>
      <!-- Tick marks along cardinal axes -->
      <div class="absolute top-[calc(50%-70px)] left-[calc(50%-5px)] w-2.5 h-px bg-powder/20"></div>
      <div class="absolute top-[calc(50%-140px)] left-[calc(50%-7px)] w-3.5 h-px bg-powder/25"></div>
      <div class="absolute top-[calc(50%-210px)] left-[calc(50%-5px)] w-2.5 h-px bg-powder/20"></div>
      <div class="absolute top-[calc(50%-280px)] left-[calc(50%-7px)] w-3.5 h-px bg-powder/25"></div>
      <div class="absolute top-[calc(50%+70px)] left-[calc(50%-5px)] w-2.5 h-px bg-powder/20"></div>
      <div class="absolute top-[calc(50%+140px)] left-[calc(50%-7px)] w-3.5 h-px bg-powder/25"></div>
      <div class="absolute top-[calc(50%-5px)] left-[calc(50%+70px)] w-px h-2.5 bg-powder/20"></div>
      <div class="absolute top-[calc(50%-7px)] left-[calc(50%+140px)] w-px h-3.5 bg-powder/25"></div>
      <div class="absolute top-[calc(50%-5px)] left-[calc(50%+210px)] w-px h-2.5 bg-powder/20"></div>
      <div class="absolute top-[calc(50%-5px)] left-[calc(50%-70px)] w-px h-2.5 bg-powder/20"></div>
      <div class="absolute top-[calc(50%-7px)] left-[calc(50%-140px)] w-px h-3.5 bg-powder/25"></div>

      <!-- Sweep cone — the rotating wedge of light -->
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[1100px] h-[1100px]">
        <div class="radar-sweep-glow"></div>
        <div class="radar-sweep-cone"></div>
      </div>

      <!-- CRT scanline overlay -->
      <div class="radar-scanlines"></div>

      <!-- Contact blips — bloom when sweep passes, then phosphor-decay -->
      <!-- Blip 1: upper-right, bearing ~330° → fires at (330/360)*8 = 7.33s into cycle -->
      <div class="radar-blip top-[26%] left-[60%] w-3 h-3 bg-gold/80" style="animation-delay: -0.67s;"></div>
      <div class="radar-blip-ring top-[26%] left-[60%] w-8 h-8 border-gold/40" style="animation-delay: -0.67s;"></div>
      <!-- Blip 2: near "Men's Lacrosse", bearing ~195° → (195/360)*8 = 4.33s -->
      <div class="radar-blip top-[57.5%] left-[47%] w-2.5 h-2.5 bg-powder/70" style="animation-delay: -3.67s;"></div>
      <div class="radar-blip-ring top-[57.5%] left-[47%] w-7 h-7 border-powder/30" style="animation-delay: -3.67s;"></div>
      <!-- Blip 3: right side, bearing ~50° → (50/360)*8 = 1.11s -->
      <div class="radar-blip top-[38%] left-[72%] w-2 h-2 bg-gold/65" style="animation-delay: -6.89s;"></div>
      <div class="radar-blip-ring top-[38%] left-[72%] w-6 h-6 border-gold/25" style="animation-delay: -6.89s;"></div>
      <!-- Blip 4: lower center, bearing ~185° → (185/360)*8 = 4.11s -->
      <div class="radar-blip top-[68%] left-[52%] w-2 h-2 bg-powder/55" style="animation-delay: -3.89s;"></div>
      <div class="radar-blip-ring top-[68%] left-[52%] w-5 h-5 border-powder/20" style="animation-delay: -3.89s;"></div>
      <!-- Blip 5: upper-left, bearing ~315° → (315/360)*8 = 7s -->
      <div class="radar-blip top-[22%] left-[38%] w-1.5 h-1.5 bg-powder/50" style="animation-delay: -1s;"></div>
      <div class="radar-blip-ring top-[22%] left-[38%] w-5 h-5 border-powder/20" style="animation-delay: -1s;"></div>
      <!-- Blip 6: lower-left, bearing ~225° → (225/360)*8 = 5s -->
      <div class="radar-blip top-[72%] left-[35%] w-1.5 h-1.5 bg-gold/45" style="animation-delay: -3s;"></div>
      <div class="radar-blip-ring top-[72%] left-[35%] w-5 h-5 border-gold/15" style="animation-delay: -3s;"></div>
      <!-- Blip 7: far right, bearing ~70° → (70/360)*8 = 1.56s -->
      <div class="radar-blip top-[45%] left-[82%] w-1.5 h-1.5 bg-powder/45" style="animation-delay: -6.44s;"></div>
      <!-- Ghost returns (noise) — faint, no ring, different bearings -->
      <div class="radar-blip top-[15%] left-[75%] w-1 h-1 bg-powder/20" style="animation-delay: -7.11s;"></div>
      <div class="radar-blip top-[80%] left-[28%] w-1 h-1 bg-gold/15" style="animation-delay: -2.78s;"></div>
      <div class="radar-blip top-[35%] left-[18%] w-1 h-1 bg-powder/15" style="animation-delay: -1.56s;"></div>
      <div class="radar-blip top-[62%] left-[78%] w-1 h-1 bg-gold/15" style="animation-delay: -6.22s;"></div>
      <div class="radar-blip top-[48%] left-[25%] w-1 h-1 bg-powder/12" style="animation-delay: -2.22s;"></div>

      <!-- Center pip — bright and steady -->
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-2.5 h-2.5 rounded-full bg-powder/60"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1 h-1 rounded-full bg-gold/80"></div>
    </div>

    <!-- Corner reference marks -->
    <div
      class="absolute top-8 right-8 w-8 h-8 border-t border-r border-powder/30 hidden lg:block"
      aria-hidden="true"
    >
    </div>
    <div
      class="absolute bottom-8 left-8 w-8 h-8 border-b border-l border-powder/30 hidden lg:block"
      aria-hidden="true"
    >
    </div>

    <div class="max-w-6xl mx-auto px-6 lg:px-16 relative">
      <div>
        <span class="label text-powder block mb-6">[club]</span>

        <h1
          class="text-5xl sm:text-7xl lg:text-8xl font-semibold tracking-tight text-foreground"
        >
          Barbary Coast
        </h1>

        <div class="mt-8 space-y-1">
          <p class="text-xl sm:text-2xl text-muted">San Francisco</p>
          <p class="text-xl sm:text-2xl text-muted">Men's Lacrosse</p>
        </div>

        <div class="mt-16">
          <span class="label text-gold">[est. 2024]</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Schedule Section -->
  <section
    id="schedule"
    class="snap-section section-full relative overflow-hidden"
  >
    <!-- Sonar ping background -->
    <div class="absolute inset-0 pointer-events-none" aria-hidden="true">
      <!-- Primary hydrophone — top-right -->
      <div class="absolute -top-[120px] -right-[120px] w-[200px] h-[200px] rounded-full border border-powder/30"></div>
      <div class="absolute -top-[120px] -right-[120px] w-[320px] h-[320px] rounded-full border border-powder/22"></div>
      <div class="absolute -top-[120px] -right-[120px] w-[440px] h-[440px] rounded-full border border-powder/16"></div>
      <div class="absolute -top-[120px] -right-[120px] w-[560px] h-[560px] rounded-full border border-powder/12"></div>
      <div class="absolute -top-[120px] -right-[120px] w-[680px] h-[680px] rounded-full border border-powder/8"></div>
      <div class="absolute -top-[120px] -right-[120px] w-[800px] h-[800px] rounded-full border border-powder/5"></div>
      <!-- Dashed intermediate rings -->
      <div class="absolute -top-[120px] -right-[120px] w-[260px] h-[260px] rounded-full border border-dashed border-powder/10"></div>
      <div class="absolute -top-[120px] -right-[120px] w-[500px] h-[500px] rounded-full border border-dashed border-powder/7"></div>
      <!-- Source pip -->
      <div class="absolute top-[2%] right-[2%] w-1.5 h-1.5 rounded-full bg-powder/50"></div>
      <!-- Secondary hydrophone — bottom-left -->
      <div class="absolute -bottom-[200px] -left-[200px] w-[280px] h-[280px] rounded-full border border-gold/25"></div>
      <div class="absolute -bottom-[200px] -left-[200px] w-[420px] h-[420px] rounded-full border border-gold/18"></div>
      <div class="absolute -bottom-[200px] -left-[200px] w-[560px] h-[560px] rounded-full border border-gold/12"></div>
      <div class="absolute -bottom-[200px] -left-[200px] w-[700px] h-[700px] rounded-full border border-gold/8"></div>
      <div class="absolute -bottom-[200px] -left-[200px] w-[840px] h-[840px] rounded-full border border-gold/5"></div>
      <!-- Dashed intermediate rings -->
      <div class="absolute -bottom-[200px] -left-[200px] w-[350px] h-[350px] rounded-full border border-dashed border-gold/8"></div>
      <div class="absolute -bottom-[200px] -left-[200px] w-[630px] h-[630px] rounded-full border border-dashed border-gold/6"></div>
      <!-- Source pip -->
      <div class="absolute bottom-[4%] left-[4%] w-1.5 h-1.5 rounded-full bg-gold/45"></div>
      <!-- Tertiary hydrophone — mid-right edge -->
      <div class="absolute top-[40%] -right-[80px] w-[200px] h-[200px] rounded-full border border-powder/12"></div>
      <div class="absolute top-[40%] -right-[80px] w-[350px] h-[350px] rounded-full border border-powder/8"></div>
      <div class="absolute top-[40%] -right-[80px] w-[500px] h-[500px] rounded-full border border-powder/5"></div>
      <!-- Bearing reference line -->
      <div class="absolute bottom-[4%] left-[4%] w-[140%] h-px bg-powder/6 origin-bottom-left -rotate-[35deg]"></div>
      <!-- Contact blips with echo halos -->
      <div class="absolute top-[28%] right-[28%] w-2.5 h-2.5 rounded-full bg-powder/55"></div>
      <div class="absolute top-[28%] right-[28%] w-6 h-6 rounded-full border border-powder/15"></div>
      <div class="absolute top-[42%] left-[42%] w-2 h-2 rounded-full bg-powder/40"></div>
      <div class="absolute top-[42%] left-[42%] w-5 h-5 rounded-full border border-powder/12"></div>
      <div class="absolute bottom-[32%] left-[25%] w-2 h-2 rounded-full bg-gold/50"></div>
      <div class="absolute bottom-[32%] left-[25%] w-5 h-5 rounded-full border border-gold/15"></div>
      <div class="absolute bottom-[20%] left-[45%] w-1.5 h-1.5 rounded-full bg-gold/35"></div>
      <div class="absolute top-[15%] left-[50%] w-1.5 h-1.5 rounded-full bg-powder/30"></div>
      <!-- Wake trails -->
      <div class="absolute top-[29%] right-[30%] w-1 h-1 rounded-full bg-powder/20"></div>
      <div class="absolute top-[30%] right-[32%] w-1 h-1 rounded-full bg-powder/12"></div>
      <div class="absolute bottom-[33%] left-[23%] w-1 h-1 rounded-full bg-gold/20"></div>
      <div class="absolute bottom-[34%] left-[21%] w-1 h-1 rounded-full bg-gold/12"></div>
      <div class="absolute top-[43%] left-[40%] w-1 h-1 rounded-full bg-powder/15"></div>
      <!-- Noise scatter -->
      <div class="absolute top-[62%] left-[68%] w-0.5 h-0.5 rounded-full bg-powder/15"></div>
      <div class="absolute top-[72%] left-[78%] w-0.5 h-0.5 rounded-full bg-gold/12"></div>
      <div class="absolute top-[18%] left-[22%] w-0.5 h-0.5 rounded-full bg-powder/10"></div>
      <div class="absolute top-[52%] left-[85%] w-0.5 h-0.5 rounded-full bg-gold/10"></div>
      <div class="absolute top-[82%] left-[55%] w-0.5 h-0.5 rounded-full bg-powder/12"></div>
    </div>

    <!-- Corner L-brackets -->
    <div
      class="absolute top-8 left-8 w-8 h-8 border-t border-l border-powder/30 hidden lg:block"
      aria-hidden="true"
    >
    </div>
    <div
      class="absolute bottom-8 right-8 w-8 h-8 border-b border-r border-powder/30 hidden lg:block"
      aria-hidden="true"
    >
    </div>

    <div class="max-w-6xl mx-auto px-6 lg:px-16 relative">
      <div class="flex flex-col lg:flex-row lg:items-start gap-16">
        <!-- Left: Header -->
        <div class="lg:w-[320px] lg:shrink-0 reveal">
          <span class="label text-powder">[upcoming]</span>
          <h2
            class="text-foreground mt-2 text-4xl sm:text-5xl font-medium tracking-tight"
          >
            Schedule
          </h2>
          <p class="text-muted mt-4 text-lg">Drinking Oportunities</p>
          <a href="/schedule" class="subtle-link mt-6 inline-block"
            >Full schedule →</a
          >
        </div>

        <!-- Right: Schedule cards -->
        <div class="lg:flex-1 reveal" style="--delay: 0.1s">
          <Schedule
            ulaxGames={ulaxGames}
            events={manualEvents}
            barbaryCoastOnly={true}
            upcomingOnly={true}
            limit={4}
          />
        </div>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section
    id="about"
    class="snap-section section-full relative overflow-hidden"
  >
    <!-- Radar sweep background — origin bottom-left -->
    <div class="absolute inset-0 pointer-events-none" aria-hidden="true">
      <!-- Major range rings (solid) -->
      <div class="absolute -bottom-[300px] -left-[300px] w-[350px] h-[350px] rounded-full border border-powder/25"></div>
      <div class="absolute -bottom-[300px] -left-[300px] w-[550px] h-[550px] rounded-full border border-powder/20"></div>
      <div class="absolute -bottom-[300px] -left-[300px] w-[750px] h-[750px] rounded-full border border-powder/18"></div>
      <div class="absolute -bottom-[300px] -left-[300px] w-[950px] h-[950px] rounded-full border border-powder/15"></div>
      <div class="absolute -bottom-[300px] -left-[300px] w-[1150px] h-[1150px] rounded-full border border-powder/12"></div>
      <div class="absolute -bottom-[300px] -left-[300px] w-[1350px] h-[1350px] rounded-full border border-powder/10"></div>
      <div class="absolute -bottom-[300px] -left-[300px] w-[1550px] h-[1550px] rounded-full border border-powder/8"></div>
      <!-- Minor range rings (dashed) -->
      <div class="absolute -bottom-[300px] -left-[300px] w-[450px] h-[450px] rounded-full border border-dashed border-powder/8"></div>
      <div class="absolute -bottom-[300px] -left-[300px] w-[650px] h-[650px] rounded-full border border-dashed border-powder/8"></div>
      <div class="absolute -bottom-[300px] -left-[300px] w-[850px] h-[850px] rounded-full border border-dashed border-powder/6"></div>
      <div class="absolute -bottom-[300px] -left-[300px] w-[1050px] h-[1050px] rounded-full border border-dashed border-powder/6"></div>
      <div class="absolute -bottom-[300px] -left-[300px] w-[1250px] h-[1250px] rounded-full border border-dashed border-powder/5"></div>
      <!-- Primary crosshair axes -->
      <div class="absolute bottom-0 left-0 w-full h-px bg-powder/20"></div>
      <div class="absolute bottom-0 left-0 w-px h-full bg-powder/20"></div>
      <!-- Bearing lines every 15° -->
      <div class="absolute bottom-0 left-0 w-[160%] h-px bg-powder/8 origin-bottom-left -rotate-[15deg]"></div>
      <div class="absolute bottom-0 left-0 w-[160%] h-px bg-powder/12 origin-bottom-left -rotate-[30deg]"></div>
      <div class="absolute bottom-0 left-0 w-[160%] h-px bg-powder/8 origin-bottom-left -rotate-[45deg]"></div>
      <div class="absolute bottom-0 left-0 w-[160%] h-px bg-powder/12 origin-bottom-left -rotate-[60deg]"></div>
      <div class="absolute bottom-0 left-0 w-[160%] h-px bg-powder/8 origin-bottom-left -rotate-[75deg]"></div>
      <!-- Sweep line -->
      <div class="absolute bottom-0 left-0 w-[160%] h-px bg-gold/35 origin-bottom-left -rotate-[38deg]"></div>
      <!-- Ghost trails -->
      <div class="absolute bottom-0 left-0 w-[160%] h-px bg-gold/18 origin-bottom-left -rotate-[34deg]"></div>
      <div class="absolute bottom-0 left-0 w-[160%] h-px bg-gold/10 origin-bottom-left -rotate-[30deg]"></div>
      <div class="absolute bottom-0 left-0 w-[160%] h-px bg-gold/5 origin-bottom-left -rotate-[26deg]"></div>
      <!-- Axis tick marks -->
      <div class="absolute bottom-0 left-[8%] w-px h-3 bg-powder/25"></div>
      <div class="absolute bottom-0 left-[18%] w-px h-3 bg-powder/25"></div>
      <div class="absolute bottom-0 left-[28%] w-px h-3 bg-powder/25"></div>
      <div class="absolute bottom-0 left-[38%] w-px h-3 bg-powder/25"></div>
      <div class="absolute bottom-0 left-[48%] w-px h-3 bg-powder/25"></div>
      <div class="absolute bottom-0 left-[58%] w-px h-3 bg-powder/25"></div>
      <div class="absolute bottom-0 left-[68%] w-px h-3 bg-powder/25"></div>
      <div class="absolute bottom-0 left-[78%] w-px h-3 bg-powder/25"></div>
      <div class="absolute bottom-0 left-[88%] w-px h-3 bg-powder/25"></div>
      <!-- Contact blips -->
      <div class="absolute bottom-[42%] left-[26%] w-2.5 h-2.5 rounded-full bg-gold/60"></div>
      <div class="absolute bottom-[42%] left-[26%] w-5 h-5 rounded-full border border-gold/20"></div>
      <div class="absolute bottom-[58%] left-[38%] w-2 h-2 rounded-full bg-powder/50"></div>
      <div class="absolute bottom-[30%] left-[52%] w-1.5 h-1.5 rounded-full bg-gold/40"></div>
      <div class="absolute bottom-[65%] left-[18%] w-1.5 h-1.5 rounded-full bg-powder/30"></div>
      <div class="absolute bottom-[20%] left-[65%] w-1 h-1 rounded-full bg-gold/25"></div>
      <div class="absolute bottom-[48%] left-[72%] w-1 h-1 rounded-full bg-powder/20"></div>
      <!-- Faded old contacts -->
      <div class="absolute bottom-[75%] left-[45%] w-1 h-1 rounded-full bg-powder/12"></div>
      <div class="absolute bottom-[35%] left-[82%] w-1 h-1 rounded-full bg-powder/10"></div>
      <!-- Origin pip -->
      <div class="absolute -bottom-[1px] -left-[1px] w-1.5 h-1.5 rounded-full bg-powder/50"></div>
    </div>

    <!-- Corner L-brackets -->
    <div
      class="absolute top-8 right-8 w-8 h-8 border-t border-r border-powder/30 hidden lg:block"
      aria-hidden="true"
    >
    </div>
    <div
      class="absolute bottom-8 left-8 w-8 h-8 border-b border-l border-powder/30 hidden lg:block"
      aria-hidden="true"
    >
    </div>

    <div class="max-w-6xl mx-auto px-6 lg:px-16 relative">
      <div class="grid lg:grid-cols-2 gap-12">
        <div class="reveal">
          <span class="label text-gold">[about]</span>
          <h2
            class="text-foreground mt-2 text-4xl sm:text-5xl font-medium tracking-tight"
          >
            The Team
          </h2>

          <div class="mt-6 space-y-4">
            <p class="text-lg text-muted">
              Barbary Coast is a men's post-collegiate lacrosse club competing
              in the San Francisco Bay Area.
            </p>
            <p class="text-lg text-muted">Good lacrosse. Great friends.</p>
          </div>

          <div class="mt-8">
            <span class="label text-subtle">[est. 2024]</span>
          </div>
        </div>

        <div class="reveal flex items-center" style="--delay: 0.1s">
          <div class="card p-8 lg:p-10 w-full">
            <h3 class="text-foreground text-2xl font-medium tracking-tight">
              Get in touch
            </h3>
            <p class="text-muted mt-2 mb-6">
              Looking for competitive players who also like to have a good time. Reach out if that's you.
            </p>
            <div class="space-y-6">
              <div>
                <span class="label text-subtle block mb-2">[email]</span>
                <a
                  href="mailto:barbarycoastlc@gmail.com"
                  class="text-xl font-medium text-foreground hover:text-powder transition-colors"
                >
                  barbarycoastlc@gmail.com
                </a>
              </div>
              <div>
                <span class="label text-subtle block mb-2">[instagram]</span>
                <a
                  href="https://www.instagram.com/barbarycoastlc/"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-xl font-medium text-foreground hover:text-gold transition-colors"
                >
                  @barbarycoastlc
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Marquee at bottom of about section -->
    <div
      class="absolute bottom-0 left-0 right-0 marquee border-t border-border py-4 bg-surface/80 backdrop-blur-sm"
    >
      <div class="marquee-content">
        {
          [...Array(3)].map(() => (
            <div class="marquee-set">
              {schools.map((school, i) => (
                <>
                  <span class="label text-muted whitespace-nowrap">
                    {school}
                  </span>
                  <span
                    class:list={[
                      "w-1 h-1",
                      i % 2 === 0 ? "bg-powder" : "bg-gold",
                    ]}
                  />
                </>
              ))}
            </div>
          ))
        }
      </div>
    </div>
  </section>
</Layout>

<script>
  // Section Observer for timeline navigation
  const sections = document.querySelectorAll("section[id]");
  const timelineItems = document.querySelectorAll<HTMLAnchorElement>(
    ".timeline-item[data-section]",
  );

  const sectionObserver = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const sectionId = entry.target.id;

          // Update timeline items
          timelineItems.forEach((item) => {
            item.classList.toggle("active", item.dataset.section === sectionId);
          });
        }
      });
    },
    { threshold: 0.5 },
  );

  sections.forEach((section) => sectionObserver.observe(section));

  // Reveal animations
  const revealObserver = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const el = entry.target as HTMLElement;
          const delay =
            getComputedStyle(el).getPropertyValue("--delay") || "0s";
          el.style.animationDelay = delay;
          el.classList.add("visible");
          revealObserver.unobserve(el);
        }
      });
    },
    { threshold: 0.1, rootMargin: "0px 0px -80px 0px" },
  );

  document
    .querySelectorAll(".reveal")
    .forEach((el) => revealObserver.observe(el));

  // Keyboard navigation between sections
  const snapContainer = document.getElementById("main");
  const sectionIds = ["hero", "schedule", "about"];

  function getCurrentSectionIndex(): number {
    if (!snapContainer) return 0;
    const scrollTop = snapContainer.scrollTop;
    const sectionHeight = snapContainer.clientHeight;
    return Math.round(scrollTop / sectionHeight);
  }

  function scrollToSection(index: number) {
    if (!snapContainer) return;
    const clampedIndex = Math.max(0, Math.min(index, sectionIds.length - 1));
    const section = document.getElementById(sectionIds[clampedIndex]);
    if (section) {
      snapContainer.scrollTo({
        top: section.offsetTop,
        behavior: "smooth",
      });
    }
  }

  // Hotkey map for section navigation
  const hotkeyMap: Record<string, string> = {
    h: "hero",
    s: "schedule",
    a: "about",
  };

  // Hotkey map for page navigation
  const pageHotkeyMap: Record<string, string> = {
    f: "/schedule",
  };

  document.addEventListener("keydown", (e) => {
    // Don't hijack if user is typing in an input
    if (
      e.target instanceof HTMLInputElement ||
      e.target instanceof HTMLTextAreaElement
    )
      return;

    // Arrow key navigation
    if (e.key === "ArrowUp" || e.key === "ArrowDown") {
      e.preventDefault();
      const current = getCurrentSectionIndex();
      scrollToSection(e.key === "ArrowUp" ? current - 1 : current + 1);
      return;
    }

    // Hotkey navigation - sections
    const sectionId = hotkeyMap[e.key.toLowerCase()];
    if (sectionId) {
      e.preventDefault();
      const index = sectionIds.indexOf(sectionId);
      if (index !== -1) {
        scrollToSection(index);
      }
      return;
    }

    // Hotkey navigation - pages
    const pagePath = pageHotkeyMap[e.key.toLowerCase()];
    if (pagePath) {
      e.preventDefault();
      window.location.href = pagePath;
    }
  });

  // Custom lacrosse ball cursor
  const cursor = document.getElementById("ball-cursor");
  const isTouch = window.matchMedia("(hover: none)").matches;

  if (cursor && !isTouch) {
    document.body.classList.add("custom-cursor");

    let cursorX = 0;
    let cursorY = 0;
    let targetX = 0;
    let targetY = 0;

    document.addEventListener("mousemove", (e) => {
      targetX = e.clientX;
      targetY = e.clientY;
      cursor.style.opacity = "1";

      // Check if hovering over interactive element
      const target = e.target as HTMLElement;
      const isInteractive = target.closest(
        'a, button, [role="button"], input, textarea, select, .timeline-item',
      );
      cursor.classList.toggle("hovering", !!isInteractive);
    });

    document.addEventListener("mouseleave", () => {
      cursor.style.opacity = "0";
    });

    document.addEventListener("mousedown", () => {
      cursor.classList.add("pressing");
    });

    document.addEventListener("mouseup", () => {
      cursor.classList.remove("pressing");
    });

    // Smooth animation loop
    function animate() {
      cursorX += (targetX - cursorX) * 0.15;
      cursorY += (targetY - cursorY) * 0.15;
      cursor!.style.left = `${cursorX}px`;
      cursor!.style.top = `${cursorY}px`;
      requestAnimationFrame(animate);
    }
    animate();
  }
</script>
